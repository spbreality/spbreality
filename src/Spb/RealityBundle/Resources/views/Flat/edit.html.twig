{% extends '::base_hero.html.twig' %}

{% block body %}
<div class="container">

    <ul class="breadcrumb">
        <li>
            <a href="#">Жилая недвижимость</a><span class="divider">/</span>
        </li>
        <li>
            <a href="{{ path('admin_flat') }}">Квартиры</a><span class="divider">/</span>
        </li>
        <li class="active">
            Редактировать объект
        </li>
    </ul>
    
    <div class="row-fluid">
      <div class="span6">    

        <form action="{{ path('admin_flat_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(edit_form) }} class="well form-horizontal">
            <fieldset>
                {{ form_widget(edit_form) }}
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Изменить</button>
                </div>
            </fieldset>                       
        </form>

        <form action="{{ path('admin_flat_delete', { 'id': entity.id }) }}" method="post">
           {{ form_widget(delete_form) }}
               <button class="btn btn-mini btn-danger" type="submit">Удалить объект</button>
        </form>                                                     
      </div>          
            
      <div class="span6">          
        {% if entity.documents|length > 0 %}         
        <div id="myCarousel" class="carousel slide">
          <div class="carousel-inner">
        <!-- Carousel items -->
            {% for doc in entity.documents %}
            <div class="item {% if loop.first %} active {% endif %}">
                <img src="{{ doc.webpath }}" alt=""/>
                {% if (doc.title is not empty or doc.desc is not empty) %}
                <div class="carousel-caption">                    
                    {% if doc.title is not empty %}<h4>{{ doc.title }}</h4>{% endif %}
                    {% if doc.desc is not empty %}<p>{{ doc.desc }}</p>{% endif %}
                </div>
                {% endif %}
            </div>
            {% endfor %}
          </div>
          <!-- Carousel nav -->
          {% if entity.documents|length > 1 %}
          <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
          <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
          {% endif %}
        </div>
        
        <ul class="thumbnails">
          {% for doc in entity.documents %} 
          <li class="span4">
            <a onclick="$('#myCarousel').carousel({{loop.index-1}})" class="thumbnail">
              <img src="{{ doc.webpath }}" alt=""/>
            </a>
            
            <form action="{{ path('admin_document_delete', { 'id': doc.id }) }}" method="post">
                {{ form_widget(delete_form) }}
                    <p align="right">
                        <button type="submit" class="btn btn-mini btn-danger">Удалить фотографию</button>
                    </p>
            </form>
          </li>
          {% endfor %}          
        </ul>          

        {% else %}
              Нет фотографий объекта.
        {% endif %}  
              
      </div>
            
    </div>

</div>
{% endblock %}